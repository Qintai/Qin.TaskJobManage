import{f as oe,i as U,g as le,U as J,h as M,j,C as R,I as x,u as ne,k as ie,l as se,m as re,n as ce,o as ue,p as T,q as de,_ as pe,r as me,s as fe,t as ve,w as he,v as be,x as ye,d as ge,b as ke,c as we,E as _e,e as Ce,a as Se}from"./el-input-3645df6a.js";import{n as G,d as Q,i as g,r as E,q as H,s as te,o as s,c as _,b as C,v as a,x as y,y as Ve,z as h,w as n,A as P,B as k,t as q,e as o,C as Z,D as Ne,E as Ie,h as Te,G as ee,u as Ee,g as De,f as A,F as Be}from"./index-c267af4a.js";import{i as Pe,r as ae}from"./HttpApi-2e362149.js";import{E as Ae}from"./index-e1cc1afd.js";const ze=oe({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Pe},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:U},activeActionIcon:{type:U},activeIcon:{type:U},inactiveIcon:{type:U},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:le(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),$e={[J]:p=>M(p)||G(p)||j(p),[R]:p=>M(p)||G(p)||j(p),[x]:p=>M(p)||G(p)||j(p)},Fe=["onClick"],Ue=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],Me=["aria-hidden"],qe=["aria-hidden"],Ke=["aria-hidden"],W="ElSwitch",Le=Q({name:W}),Oe=Q({...Le,props:ze,emits:$e,setup(p,{expose:z,emit:w}){const t=p,K=Te(),{formItem:S}=ne(),f=ie(),l=se("switch");(e=>{e.forEach(d=>{me({from:d[0],replacement:d[1],scope:W,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},g(()=>{var F;return!!((F=K.vnode.props)!=null&&F[d[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:L}=re(t,{formItemContext:S}),b=ce(g(()=>t.loading)),V=E(t.modelValue!==!1),N=E(),u=E(),i=g(()=>[l.b(),l.m(f.value),l.is("disabled",b.value),l.is("checked",r.value)]),v=g(()=>[l.e("label"),l.em("label","left"),l.is("active",!r.value)]),O=g(()=>[l.e("label"),l.em("label","right"),l.is("active",r.value)]),D=g(()=>({width:ue(t.width)}));H(()=>t.modelValue,()=>{V.value=!0}),H(()=>t.value,()=>{V.value=!1});const I=g(()=>V.value?t.modelValue:t.value),r=g(()=>I.value===t.activeValue);[t.activeValue,t.inactiveValue].includes(I.value)||(w(J,t.inactiveValue),w(R,t.inactiveValue),w(x,t.inactiveValue)),H(r,e=>{var d;N.value.checked=e,t.validateEvent&&((d=S==null?void 0:S.validate)==null||d.call(S,"change").catch(F=>fe()))});const m=()=>{const e=r.value?t.inactiveValue:t.activeValue;w(J,e),w(R,e),w(x,e),Ie(()=>{N.value.checked=r.value})},$=()=>{if(b.value)return;const{beforeChange:e}=t;if(!e){m();return}const d=e();[ee(d),M(d)].includes(!0)||ve(W,"beforeChange must return type `Promise<boolean>` or `boolean`"),ee(d)?d.then(Y=>{Y&&m()}).catch(Y=>{}):d&&m()},c=g(()=>l.cssVarBlock({...t.activeColor?{"on-color":t.activeColor}:null,...t.inactiveColor?{"off-color":t.inactiveColor}:null,...t.borderColor?{"border-color":t.borderColor}:null})),B=()=>{var e,d;(d=(e=N.value)==null?void 0:e.focus)==null||d.call(e)};return te(()=>{N.value.checked=r.value}),z({focus:B,checked:r}),(e,d)=>(s(),_("div",{class:y(a(i)),style:Z(a(c)),onClick:Ne($,["prevent"])},[C("input",{id:a(L),ref_key:"input",ref:N,class:y(a(l).e("input")),type:"checkbox",role:"switch","aria-checked":a(r),"aria-disabled":a(b),name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:a(b),tabindex:e.tabindex,onChange:m,onKeydown:Ve($,["enter"])},null,42,Ue),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(s(),_("span",{key:0,class:y(a(v))},[e.inactiveIcon?(s(),h(a(T),{key:0},{default:n(()=>[(s(),h(P(e.inactiveIcon)))]),_:1})):k("v-if",!0),!e.inactiveIcon&&e.inactiveText?(s(),_("span",{key:1,"aria-hidden":a(r)},q(e.inactiveText),9,Me)):k("v-if",!0)],2)):k("v-if",!0),C("span",{ref_key:"core",ref:u,class:y(a(l).e("core")),style:Z(a(D))},[e.inlinePrompt?(s(),_("div",{key:0,class:y(a(l).e("inner"))},[e.activeIcon||e.inactiveIcon?(s(),h(a(T),{key:0,class:y(a(l).is("icon"))},{default:n(()=>[(s(),h(P(a(r)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(s(),_("span",{key:1,class:y(a(l).is("text")),"aria-hidden":!a(r)},q(a(r)?e.activeText:e.inactiveText),11,qe)):k("v-if",!0)],2)):k("v-if",!0),C("div",{class:y(a(l).e("action"))},[e.loading?(s(),h(a(T),{key:0,class:y(a(l).is("loading"))},{default:n(()=>[o(a(de))]),_:1},8,["class"])):e.activeActionIcon&&a(r)?(s(),h(a(T),{key:1},{default:n(()=>[(s(),h(P(e.activeActionIcon)))]),_:1})):e.inactiveActionIcon&&!a(r)?(s(),h(a(T),{key:2},{default:n(()=>[(s(),h(P(e.inactiveActionIcon)))]),_:1})):k("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(s(),_("span",{key:1,class:y(a(O))},[e.activeIcon?(s(),h(a(T),{key:0},{default:n(()=>[(s(),h(P(e.activeIcon)))]),_:1})):k("v-if",!0),!e.activeIcon&&e.activeText?(s(),_("span",{key:1,"aria-hidden":!a(r)},q(e.activeText),9,Ke)):k("v-if",!0)],2)):k("v-if",!0)],14,Fe))}});var je=pe(Oe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const Ge=he(je);const He={style:{"margin-bottom":"15px"}},Je=C("a",{class:"el-button el-button--primary",target:"_blank",href:"https://cron.qqe2.com/"}," 在线cron ",-1),Re=C("i",{"inline-block":"","align-middle":"",i:"dark:carbon-moon carbon-sun"},null,-1),xe={class:"ml-2"},We=["innerHTML"],ea=Q({__name:"JobTable",setup(p){const z=be(),w=ye(z),t=Ee(),K=E("0"),S=E([{taskName:"Demo1",groupName:"Demo_group",status:0,cron:"0 0 12 * * ?",des:"每天中午12点触发",updateTime:"2023-08-09 01:01:11"}]),f=De({taskName:"",groupName:"",dynamicData:"",pageindex:"",pagesize:""});console.info(t),te(()=>{console.info("启动了"),l()});function l(){const u={taskName:f.taskName,groupName:f.groupName};ae("/TaskJob-Getjobs",u,function(i){i.status&&(S.value=i.data,K.value=i.Count)})}function X(u){return u==0?"<span style='color:green;font-weight:bolder'>正常</span>":u==1?"<span style='color:red;font-weight:bolder'>暂停</span>":u==2?"<span style='color:red;font-weight:bolder'>完成</span>":u==3?"<span style='color:yellow;font-weight:bolder'>异常</span>":u==4?"<span style='color:blue;font-weight:bolder'>阻塞</span>":u==5?"<span style='color:red;font-weight:bolder'>停止</span>":"<span style='color:red;font-weight:bolder'>不存在</span>"}function L(u){t.push({path:"jobdetail",query:{taskName:u.taskName,groupName:u.groupName}})}function b(u,i){i.dynamicData=f.dynamicData,ae("/TaskJob-"+u,i,function(v){v.status&&(l(),Ae({message:v.msg,type:"success"}))})}const V=E(!1);function N(u){V.value?b("Startup",{dynamicData:""}):b("Stop",{dynamicData:""})}return(u,i)=>{const v=ge,O=Ge,D=ke,I=we,r=_e,m=Ce,$=Se;return s(),_(Be,null,[C("div",He,[Je,o(v,{type:"success",onClick:i[0]||(i[0]=c=>a(w)()),style:{width:"80px"}},{default:n(()=>[Re,C("span",xe,q(a(z)?"Dark":"Light"),1)]),_:1}),o(v,null,{default:n(()=>[o(O,{modelValue:V.value,"onUpdate:modelValue":i[1]||(i[1]=c=>V.value=c),class:"ml-2","inline-prompt":"",onChange:N,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#4c4d4f"},"active-text":"已开启调度","inactive-text":"已关闭调度"},null,8,["modelValue"])]),_:1})]),o(r,{inline:!0,model:f,"label-width":"auto",style:{}},{default:n(()=>[o(I,null,{default:n(()=>[o(D,{modelValue:f.taskName,"onUpdate:modelValue":i[2]||(i[2]=c=>f.taskName=c),placeholder:"任务名",clearable:""},null,8,["modelValue"])]),_:1}),o(I,null,{default:n(()=>[o(D,{modelValue:f.groupName,"onUpdate:modelValue":i[3]||(i[3]=c=>f.groupName=c),placeholder:"分组名",clearable:""},null,8,["modelValue"])]),_:1}),o(I,null,{default:n(()=>[o(D,{modelValue:f.dynamicData,"onUpdate:modelValue":i[4]||(i[4]=c=>f.dynamicData=c),placeholder:"执行参数",clearable:"",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),o(I,null,{default:n(()=>[o(v,{type:"warning",onClick:l},{default:n(()=>[A("查询")]),_:1})]),_:1})]),_:1},8,["model"]),o($,{data:S.value,border:"",size:"small","highlight-current-row":"true",style:{width:"100%"}},{default:n(()=>[o(m,{prop:"taskName",label:"任务名"}),o(m,{prop:"groupName",label:"分组名"}),o(m,{prop:"status",label:"状态"},{default:n(c=>[C("span",{innerHTML:X(c.row.status)},null,8,We)]),_:1}),o(m,{prop:"cron",label:"Cron"}),o(m,{prop:"des",label:"描述"}),o(m,{prop:"updateTime",label:"最后执行时间"}),o(m,{fixed:"right",label:"操作",width:"240"},{default:n(c=>[o(v,{link:"",type:"primary",size:"small",onClick:B=>b("Run",c.row)},{default:n(()=>[A(" 立即执行 ")]),_:2},1032,["onClick"]),o(v,{link:"",type:"primary",size:"small",onClick:B=>b("Pause",c.row)},{default:n(()=>[A(" 暂停 ")]),_:2},1032,["onClick"]),o(v,{link:"",type:"primary",size:"small",onClick:B=>b("Start",c.row)},{default:n(()=>[A(" 开启 ")]),_:2},1032,["onClick"])]),_:1}),o(m,{fixed:"right",label:"操作",width:"220"},{default:n(c=>[o(v,{link:"",type:"primary",size:"small",onClick:B=>L(c.row)},{default:n(()=>[A(" 记录 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}}});export{ea as default};
